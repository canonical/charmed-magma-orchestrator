# Copyright 2021 Canonical Ltd.
# See LICENSE file for licensing details.

name: magma-orc8r-bootstrapper
description: |
  bootstrapper manages the certificate bootstrapping process for newly registered gateways and
  gateways whose cert has expired
summary: |
  bootstrapper manages the certificate bootstrapping process for newly registered gateways and
  gateways whose cert has expired
website: https://github.com/canonical/charmed-magma-orchestrator

containers:
  magma-orc8r-bootstrapper:
    resource: magma-orc8r-bootstrapper-image
    mounts:
      - storage: certs
        location: /var/opt/magma/certs

resources:
  magma-orc8r-bootstrapper-image:
    type: oci-image
    description: OCI image for magma-orc8r-bootstrapper
    upstream-source: ghcr.io/gruyaume/magma-orc8r-controller:1.6.1

storage:
  certs:
    type: filesystem
    description: Certs storage
    minimum-size: 1M

provides:
  magma-orc8r-bootstrapper:
    interface: magma-orc8r-bootstrapper

peers:
  replicas:
    interface: orc8r-bootstrapper-replica
