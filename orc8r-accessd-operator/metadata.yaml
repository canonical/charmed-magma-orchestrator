# Copyright 2021 Canonical Ltd.
# See LICENSE file for licensing details.

name: magma-orc8r-accessd
description: |
  magma-orc8r-accessd stores, manages and verifies operator identity objects and their rights to access
  (read/write) entities.
summary: |
  accessd stores, manages and verifies operator identity objects
website: https://github.com/canonical/charmed-magma-orchestrator

containers:
  magma-orc8r-accessd:
    resource: magma-orc8r-accessd-image
    mounts:
      - storage: certs
        location: /var/opt/magma/certs
      - storage: config
        location: /var/opt/magma/configs/orc8r

storage:
  config:
    type: filesystem
    description: Configs storage
    minimum-size: 1M
  certs:
    type: filesystem
    description: Certs storage
    minimum-size: 1M

resources:
  magma-orc8r-accessd-image:
    type: oci-image
    description: OCI image for magma-orc8r-accessd
    upstream-source: linuxfoundation.jfrog.io/magma-docker/controller:1.8.0

provides:
  magma-orc8r-accessd:
    interface: magma-orc8r-accessd
    limit: 1

requires:
  db:
    interface: pgsql
    limit: 1
